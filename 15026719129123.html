<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  ä»åˆ‡åœ†è§’å¼•å‘çš„å¯¹iOSåŠ¨ç”»æ¡†æ¶çš„æ¢ç©¶ - RookieNeo
  
  </title>
 <meta name="description" content="å­¦è€Œä¸æ€åˆ™ç½”,æ€è€Œä¸å­¦åˆ™æ®†">
 <link href="atom.xml" rel="alternate" title="RookieNeo" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />

    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
    <script src="asset/highlightjs/highlight.pack.js"></script>
    <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
    <script>hljs.initHighlightingOnLoad();</script>
    
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>

<div id="header">
    <h1><a href="index.html">RookieNeo</a></h1>
</div>

</nav>
        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; RookieNeo</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
      <li><a href="index.html">Home</a></li>
      
        <li class="divider"></li>
        <li><label>Swift</label></li>

          
            <li><a title="å…³äºHTTPSçš„æ¢ç©¶" href="15221395300202.html">å…³äºHTTPSçš„æ¢ç©¶</a></li>
          
            <li><a title="çµæ´»æ‰©å±•çš„ä¸‹æ‹‰åˆ·æ–°æ§ä»¶çš„å°è£…" href="15113233292599.html">çµæ´»æ‰©å±•çš„ä¸‹æ‹‰åˆ·æ–°æ§ä»¶çš„å°è£…</a></li>
          
            <li><a title="å¯¹Swiftå†™æ—¶å¤åˆ¶æŠ€æœ¯çš„ç†è§£" href="15034498083541.html">å¯¹Swiftå†™æ—¶å¤åˆ¶æŠ€æœ¯çš„ç†è§£</a></li>
          
            <li><a title="ä»åˆ‡åœ†è§’å¼•å‘çš„å¯¹iOSåŠ¨ç”»æ¡†æ¶çš„æ¢ç©¶" href="15026719129123.html">ä»åˆ‡åœ†è§’å¼•å‘çš„å¯¹iOSåŠ¨ç”»æ¡†æ¶çš„æ¢ç©¶</a></li>
          
            <li><a title="åŸºäºAlamofireç½‘ç»œåº“çš„äºŒæ¬¡å°è£…" href="15017218903153.html">åŸºäºAlamofireç½‘ç»œåº“çš„äºŒæ¬¡å°è£…</a></li>
          
            <li><a title="Swiftä¸­å¯¹äºæœ‰å…ˆåé¡ºåºçš„ç½‘ç»œè¯·æ±‚çš„ä¼˜åŒ–" href="15008764200399.html">Swiftä¸­å¯¹äºæœ‰å…ˆåé¡ºåºçš„ç½‘ç»œè¯·æ±‚çš„ä¼˜åŒ–</a></li>
          
            <li><a title="Whats-new-in-swift-4 (ä¸‹)" href="14970555001135.html">Whats-new-in-swift-4 (ä¸‹)</a></li>
          
            <li><a title="Whats-new-in-swift-4 (ä¸Š)" href="14969065461458.html">Whats-new-in-swift-4 (ä¸Š)</a></li>
          
            <li><a title="Swiftä¸­å¯¹UserDefaultsçš„å°è£…" href="14956811508929.html">Swiftä¸­å¯¹UserDefaultsçš„å°è£…</a></li>
          
            <li><a title="Swiftçš„ä¸€ç§å¸¸ç”¨ç±»å‹" href="14936932217611.html">Swiftçš„ä¸€ç§å¸¸ç”¨ç±»å‹</a></li>
          
            <li><a title="æŒ‰é’®åŠ ä¸‹æ‹‰å¼¹æ¡†æ§ä»¶çš„å°è£…" href="14924176125873.html">æŒ‰é’®åŠ ä¸‹æ‹‰å¼¹æ¡†æ§ä»¶çš„å°è£…</a></li>
          

      
      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>

        <section id="main-content" role="main" class="scroll-container">

          <div class="row">
            <div class="large-3 medium-3 columns">
              <div class="hide-for-small">
                <div class="sidebar">
                <nav>
                  <ul id="side-nav" class="side-nav">

                    
                      <li class="side-title"><span>Swift</span></li>
                        
                          <li><a title="å…³äºHTTPSçš„æ¢ç©¶" href="15221395300202.html">å…³äºHTTPSçš„æ¢ç©¶</a></li>
                        
                          <li><a title="çµæ´»æ‰©å±•çš„ä¸‹æ‹‰åˆ·æ–°æ§ä»¶çš„å°è£…" href="15113233292599.html">çµæ´»æ‰©å±•çš„ä¸‹æ‹‰åˆ·æ–°æ§ä»¶çš„å°è£…</a></li>
                        
                          <li><a title="å¯¹Swiftå†™æ—¶å¤åˆ¶æŠ€æœ¯çš„ç†è§£" href="15034498083541.html">å¯¹Swiftå†™æ—¶å¤åˆ¶æŠ€æœ¯çš„ç†è§£</a></li>
                        
                          <li><a title="ä»åˆ‡åœ†è§’å¼•å‘çš„å¯¹iOSåŠ¨ç”»æ¡†æ¶çš„æ¢ç©¶" href="15026719129123.html">ä»åˆ‡åœ†è§’å¼•å‘çš„å¯¹iOSåŠ¨ç”»æ¡†æ¶çš„æ¢ç©¶</a></li>
                        
                          <li><a title="åŸºäºAlamofireç½‘ç»œåº“çš„äºŒæ¬¡å°è£…" href="15017218903153.html">åŸºäºAlamofireç½‘ç»œåº“çš„äºŒæ¬¡å°è£…</a></li>
                        
                          <li><a title="Swiftä¸­å¯¹äºæœ‰å…ˆåé¡ºåºçš„ç½‘ç»œè¯·æ±‚çš„ä¼˜åŒ–" href="15008764200399.html">Swiftä¸­å¯¹äºæœ‰å…ˆåé¡ºåºçš„ç½‘ç»œè¯·æ±‚çš„ä¼˜åŒ–</a></li>
                        
                          <li><a title="Whats-new-in-swift-4 (ä¸‹)" href="14970555001135.html">Whats-new-in-swift-4 (ä¸‹)</a></li>
                        
                          <li><a title="Whats-new-in-swift-4 (ä¸Š)" href="14969065461458.html">Whats-new-in-swift-4 (ä¸Š)</a></li>
                        
                          <li><a title="Swiftä¸­å¯¹UserDefaultsçš„å°è£…" href="14956811508929.html">Swiftä¸­å¯¹UserDefaultsçš„å°è£…</a></li>
                        
                          <li><a title="Swiftçš„ä¸€ç§å¸¸ç”¨ç±»å‹" href="14936932217611.html">Swiftçš„ä¸€ç§å¸¸ç”¨ç±»å‹</a></li>
                        
                          <li><a title="æŒ‰é’®åŠ ä¸‹æ‹‰å¼¹æ¡†æ§ä»¶çš„å°è£…" href="14924176125873.html">æŒ‰é’®åŠ ä¸‹æ‹‰å¼¹æ¡†æ§ä»¶çš„å°è£…</a></li>
                        

                    
                  </ul>
                </nav>
                </div>
              </div>
            </div>
            <div class="large-9 medium-9 columns">

 <div class="markdown-body">
<h1>ä»åˆ‡åœ†è§’å¼•å‘çš„å¯¹iOSåŠ¨ç”»æ¡†æ¶çš„æ¢ç©¶</h1>

<p><font color=#5F9EA0 size=4 ></p>

<blockquote>
<p>ä¸Šå‘¨åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­,é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜,å°±æ˜¯å¦‚ä½•åªåˆ‡å‰²å›¾ç‰‡çš„å•ç‹¬ä¸€ä¸ªåœ†è§’,è€Œä¸æ˜¯å››ä¸ªåœ†è§’,åœºæ™¯æ˜¯ç”¨æˆ·åœ¨ç‚¹ç«é”…åº•æ–™çš„æ—¶å€™,å››å®«æ ¼é”…åº•æ˜¯ç”±å››ä¸ªé”…æ‹¼æˆçš„,æ¯ä¸ªé”…çš„å›¾ç‰‡éƒ½æ˜¯ä¸ä¸€æ ·çš„,è¦æ‹¼æ¥æˆä¸€ä¸ªå®Œæˆçš„é”…åº•,å…·ä½“æƒ…å†µçœ‹å›¾ç‰‡,é”…åº•çš„å››å¼ å›¾ç‰‡æ¯ä¸€å¼ éƒ½åªæœ‰ä¸€ä¸ªåœ†è§’.<br/>
</font></p>
</blockquote>

<p><img src="media/15026719129123/15026752741187.jpg" alt="" style="width:320px;"/></p>

<h3 id="toc_0">æ–¹æ¡ˆä¸€</h3>

<p>å…¶å®è¿™æœ‰ä¸€ä¸ªéå¸¸ç®€å•çš„æ–¹æ³•,å°±æ˜¯æŠŠè¿™å››ä¸ª<code>UIImageView</code>æ”¾åˆ°ä¸€ä¸ªå¤§çš„Viewä¸­,æŠŠè¿™ä¸ªViewåˆ‡ä¸€ä¸ªåœ†è§’,å°±okäº†,ä¸€å¼€å§‹æˆ‘å°±è¿™è¿™ä¹ˆåšçš„,ä½†æ˜¯éšåå¦ä¸€ä¸ªé—®é¢˜æ‘†åœ¨äº†æˆ‘çš„é¢å‰.<br/>
<img src="media/15026719129123/15026921116631.jpg" alt="" style="width:306px;"/><br/>
å°±æ˜¯ç”¨æˆ·åœ¨æ·»åŠ é”…åº•çš„æ—¶å€™,å½“å‰ä¸ºç©ºçš„é”…åº•éœ€è¦æ˜¾ç¤ºä¸ºçº¢è‰²çš„çº¿(åƒä¸Šæ–‡çš„å›¾ç‰‡é‚£æ ·),è¿™æ¬¡æˆ‘å†ä¹Ÿä¸èƒ½æŠ•æœºå–å·§äº†.æ‰€ä»¥æˆ‘è§‰å¾—å¥½å¥½ç ”ç©¶ä¸€ä¸‹,ç¬¬ä¸€æ­¥å…ˆä»åˆ‡åœ†è§’å¼€å§‹.</p>

<pre><code>extension UIView {
    func addRoundedCorners(withRect rect: CGRect,rectCorner: UIRectCorner,cornerRadii: CGSize){
        let maskPath = UIBezierPath(roundedRect: rect, byRoundingCorners: rectCorner, cornerRadii: cornerRadii)
        let maskLayer = CAShapeLayer()
        maskLayer.frame = rect
        maskLayer.path = maskPath.cgPath
        self.layer.mask = maskLayer
    }
}
</code></pre>

<p>éå¸¸å¥½,è°ƒç”¨è¿™ä¸ªæ–¹æ³•åæ•ˆæœçœŸçš„å’Œç¬¬ä¸€å¼ å›¾ä¸€æ¨¡ä¸€æ ·,éƒ½åªæœ‰ä¸€ä¸ªåœ†è§’,ä¸‹é¢å¼€å§‹ä¸‹ä¸€æ­¥,å°±æ˜¯åœ¨æ²¡æœ‰é”…åº•çš„viewä¸­åŠ å…¥çº¢çº¿,æˆ‘çš„æƒ³æ³•æ˜¯åŠ ä¸ŠBorderå°±å¯ä»¥äº†,so æˆ‘è®¾ç½®äº†ä¸€ä¸‹border,ç»“æœæ˜¯è¿™ä¸ªæ ·å­çš„<br/>
<img src="media/15026719129123/15026980717569.jpg" alt="" style="width:318px;"/><br/><br/>
çœ‹ä¼¼æŒºå¯¹çš„,ä½†å…¶å®æ˜¯æœ‰é—®é¢˜çš„,é‚£å°±æ˜¯æ¯ä¸ªåœ†è§’çš„ä½ç½® Borderéƒ½æ²¡æœ‰ä½œç”¨,éƒ½æ¶ˆå¤±äº†,è¿™æ˜¯å› ä¸ºä»€ä¹ˆæˆ‘è¦è§£é‡Šä¸€ä¸‹.<br/>
<font color=#5F9EA0 size=4 ></p>

<blockquote>
<p>é¦–å…ˆè¦è¯´ä¸€ä¸‹maskè¿™ä¸ªCALayerçš„å±æ€§,æŸ¥çœ‹API,ä¼šå‘ç°CALayerä¸­çš„maskå±æ€§,ä¹Ÿæ˜¯CALayerç±»å‹çš„,å®˜æ–¹çš„è§£é‡Šç¿»è¯‘è¿‡æ¥æ„æ€å°±æ˜¯layerä¸­çš„å¯è§†åŒºåŸŸ,åœ¨çœ‹ä¸€ä¸‹æˆ‘ä¸Šé¢çš„ä»£ç ,åˆ›å»ºäº†åªæœ‰ä¸€ä¸ªåœ†è§’çš„è´å¡å°”æ›²çº¿,è®¾ç½®ä¸ºlayerçš„path,ç„¶åèµ‹å€¼ç»™viewçš„maskå±æ€§.ç„¶ååœ¨è®¾ç½®çš„æ˜¯viewçš„border,è¯´åˆ°è¿™,åŸå› ä¹Ÿå°±å‡ºæ¥äº†,æˆ‘ç”»å›¾è§£é‡Šä¸€ä¸‹.<br/>
</font></p>
</blockquote>

<p><img src="media/15026719129123/15026996232116.jpg" alt="" style="width:351px;"/><br/>
ç»¿è‰²éƒ¨åˆ†æ˜¯layer.border,è€Œé‡Œé¢çš„åœ†è§’æ˜¯maskçš„layer,åˆšæ‰è¯´è¿‡äº†,å¯è§†åŒºåŸŸæ˜¯maské‡Œé¢çš„éƒ¨åˆ†,æ‰€ä»¥åœ†è§’çš„é‚£éƒ¨åˆ†borderçœ‹ä¸åˆ°äº†.(<del>åˆ°ç°åœ¨æˆ‘ç»ˆäºçŸ¥é“äº† <code>view.layer.masksToBounds = true</code>è¿™ä¸ªå±æ€§æ˜¯å¹²å˜›äº†</del>åæ¥ä¸€çœ‹,å¥½åƒè¯´çš„ä¸å¯¹)æœ‰åŒå­¦å¯èƒ½ä¼šæƒ³,é‚£æŠŠmaskçš„borderæ”¹å®½ä¸å°±è¡Œäº†å—?ä½†ç»è¿‡æˆ‘çš„æµ‹è¯•æ˜¯æ— æ•ˆçš„,æˆ‘è®¤ä¸ºæ˜¯è‹¹æœåšäº†ç‰¹æ®Šçš„è®¾ç½®,ä¸€ä¸ªæ§åˆ¶æ˜¾ç¤ºåŒºåŸŸçš„layerå¦‚æœè¿˜å¯ä»¥è®¾ç½®<code>borderWidth</code>å’Œ<code>borderColor</code>çš„è¯å°±ä¸å¯¹äº†.<br/>
æ‰€ä»¥å°±å¾—è‡ªå·±ç”»ä¸€ä¸ªlayeråŠ ä¸Šå»äº†.</p>

<pre><code>func addRoundCorneerBezierPath(rect: CGRect,roundCorneer: UIRectCorner,radii: CGSize){
        let layer = CAShapeLayer()
        layer.lineWidth = 1
        layer.strokeColor = UIColor.red.cgColor
        layer.fillColor = UIColor.clear.cgColor
        let path = UIBezierPath(roundedRect: CGRect(x: 1, y: 1, width: rect.width-2, height: rect.height-2), byRoundingCorners: roundCorneer, cornerRadii: radii)
        layer.path = path.cgPath
        self.layer.addSublayer(layer)
    }
</code></pre>

<p>CAShaperLayeræ˜¯CALayerçš„å­ç±».CAShapeLayeræ˜¯ä¸€ä¸ªå›¾å±‚,å›¾å±‚ä¸Šä½ å¯ä»¥ç”»å„ç§ä¸œè¥¿,å®ƒçš„pathå±æ€§å°±æ˜¯å®ƒçš„è·¯çº¿,è·¯çº¿å¯ä»¥æœ‰å¾ˆå¤šæ–¹å¼æ¥ç”»,åªä¸è¿‡æˆ‘ä»¬é€‰æ‹©ç”¨UIBezierPathæ¥ç”»è€Œå·²,å½“ç„¶BezierPathå€¼å¾—ç ”ç©¶çš„åœ°æ–¹è¿˜æœ‰å¾ˆå¤š,è¿™åœ°å°±ä¸ä¸€ä¸€ç»†è¯´äº†.CAShapeLayerä¹Ÿå¯ä»¥å’ŒCALayerä¸€æ ·è®¾ç½®frameæˆ–èƒŒæ™¯é¢œè‰²,åªä¸è¿‡ä¸€èˆ¬æˆ‘ä»¬ç”¨å®ƒæ¥ç»˜åˆ¶å›¾å½¢.<br/>
æ—¢ç„¶å·²ç»è¯´äº†è¿™ä¹ˆå¤šCAå®¶æ—çš„ä¸œè¥¿,é‚£å°±ç»§ç»­è¯´ä¸€ä¸‹CABasicAnimationåŠ¨ç”»å’ŒCAGradientLayeræ¢¯åº¦å›¾å±‚.</p>

<h3 id="toc_1">è½¬è½¬è½¬</h3>

<p><img src="media/15026719129123/haha.gif" alt="haha" style="width:150px;"/><br/>
ä¸‹é¢åšä¸€ä¸ªDemo,å°±æ˜¯è¿™ç§è½¬è½¬è½¬,é¢œè‰²æ¸å˜çš„æ•ˆæœ.è¿™ç§å¸¸è§çš„æ•ˆæœåœ¨å¾ˆå¤šåœºæ™¯éƒ½æœ‰ä½¿ç”¨,æ¯”å¦‚è’™æ¿,æ¸©åº¦è®¡,å„ç§ä»ªè¡¨éƒ½æœ‰ä½¿ç”¨.<br/>
é¦–å…ˆåˆ›å»ºä¸€ä¸ªåœ†ç¯çš„CAShapeLayer</p>

<pre><code> let view = UIView(frame: CGRect(x: 20, y: 20, width: 200, height: 200))
        view.backgroundColor = UIColor.gray
        self.view.addSubview(view)
        let layer = CAShapeLayer()
        layer.lineWidth = 10 //çº¿å®½ 
        layer.strokeStart = 0//èµ·å§‹ç‚¹
        layer.strokeEnd = 0//ç»“æŸç‚¹
        layer.strokeColor = UIColor.white.cgColor
        layer.fillColor = UIColor.clear.cgColor
        let path1 = UIBezierPath(arcCenter: CGPoint(x: 100, y: 100), radius: 45, startAngle: 1.5*CGFloat.pi, endAngle: 3.46*CGFloat.pi, clockwise: true)
        layer.path = path1.cgPath
        layer.lineCap = &quot;round&quot; //çº¿å¤´æ ·å¼
        view.layer.addSublayer(layer)
</code></pre>

<p>ç„¶å,åˆ›å»ºä¸€ä¸ªé¢œè‰²æ¸å˜çš„CAGradientLayerçš„å¯è§†åŒºåŸŸmaskè®¾ç½®ä¸ºä¸Šæ–‡çš„ç¯å½¢layer,å› ä¸ºCAShapeLayeræ²¡æœ‰èƒ½å¤„ç†é¢œè‰²æ¸å˜çš„åŠæ³•,æ‰€ä»¥åªèƒ½æ¢ä¸ªåŠæ³•,ç”¨CAGradientLayer.CAGradientLayerçš„ç”¨æ³•å¾ˆç®€å•,çœ‹åˆ°ä»£ç å°±ä¼šç”¨äº†.å®ƒä¹Ÿç»§æ‰¿è‡ªCALayer.</p>

<pre><code>let gra = CAGradientLayer()
        gra.backgroundColor = UIColor.gray.cgColor
        gra.colors = [UIColor.red.cgColor,UIColor.green.cgColor]//æ¸å˜çš„é¢œè‰²
        gra.locations = [0.3,1]//é¢œè‰²å˜åŒ–çš„ç™¾åˆ†æ¯”
        gra.frame = CGRect(x: 0, y: 0, width: 200, height: 200)
        gra.position = self.view.center
        gra.startPoint = CGPoint(x: 1, y: 0)//é¢œè‰²å¼€å§‹çš„ä½ç½®
        gra.endPoint = CGPoint(x: 1, y: 1)//é¢œè‰²ç»“æŸçš„ä½ç½®
        gra.mask = layer//Â  é€šè¿‡maskå±æ€§æ¥æˆªå–æ¸å˜å±‚
        self.view.layer.addSublayer(gra)
</code></pre>

<p><img src="media/15026719129123/15028679902914.jpg" alt="" style="width:317px;"/></p>

<p>æ•ˆæœæ˜¯è¿™æ ·çš„,å½“ä½ æŠŠgra.maskè®¾ç½®ä¸ºä¸Šæ–‡çš„ç¯å½¢layerçš„æ—¶å€™.<br/>
<img src="media/15026719129123/15028680909612.jpg" alt="" style="width:181px;"/></p>

<p>OKäº†,æœ€åå°±æ˜¯è®©å®ƒåŠ¨èµ·æ¥äº†.æƒ³è¦åŠ¨èµ·æ¥éœ€è¦ç”¨åˆ°CABasicAnimationè¿™ä¸ªç±»,æ¥æ§åˆ¶<code>layer.strokeStart = 0//èµ·å§‹ç‚¹ layer.strokeEnd = 0//ç»“æŸç‚¹</code>,ç®€å•æ¥è¯´è¿™ä¸ªåŠ¨ç”»å¯ä»¥åˆ†ä¸ºä¸¤éƒ¨åˆ†,ç¬¬ä¸€åˆ†éƒ¨,layer.strokeEndçš„å€¼ä»é›¶åˆ°1,ç¬¬äºŒéƒ¨åˆ†,layer.strokeStartçš„å€¼ä»0åˆ°1.ç„¶åå¾ªç¯ä»£ç”¨å°±ğŸ‘Œäº†</p>

<pre><code>var an : CABasicAnimation!
an = CABasicAnimation(keyPath: &quot;strokeEnd&quot;)
        an.duration = 1
        an.fromValue = 0
        an.toValue = 1
        an.delegate = self//è®¾ç½®ä»£ç†åœ¨ç¬¬ä¸€éƒ¨åˆ†çš„åŠ¨ç”»ç»“æŸçš„æ—¶å€™,å¼€å§‹ç¬¬äºŒéƒ¨åˆ†çš„åŠ¨ç”».
        an.isRemovedOnCompletion = false
        an.fillMode = kCAFillModeForwards
//        an.timingFunction = CAMediaTimingFunction(name: kCAMediaTimingFunctionEaseIn)
        an.timingFunction = CAMediaTimingFunction(controlPoints: 0.17, 0.76, 0.71, 0.15)
        self.layer.add(an, forKey: &quot;com.CABasicAnimation1&quot;)
</code></pre>

<blockquote>
<p>åœ¨CABasicAnimationä¸­æœ‰ä¸‰ä¸ªå±æ€§,éœ€è¦è¯´æ˜ä¸€ä¸‹,ç¬¬ä¸€ä¸ªå°±æ˜¯an.isRemovedOnCompletion = false,è¿™å±æ€§çš„æ„æ€æ˜¯åœ¨åŠ¨ç”»ç»“æŸåæ˜¯å›åˆ°åŠ¨ç”»ä¹‹å‰çš„layerè¿˜æ˜¯ä¿æŒåŠ¨ç”»ä¹‹åçš„layer,ç¬¬äºŒä¸ªæ˜¯an.fillMode = kCAFillModeForwards,è¿™ä¸ªå±æ€§åªæœ‰åœ¨ä¸Šä¸€ä¸ªå±æ€§æ˜¯falseçš„æ—¶å€™æ‰ä¼šæœ‰æ•ˆæœ.<a href="http://www.jianshu.com/p/91fccd32f6fb">è¿™äº›å±æ€§æœ‰ä»€ä¹ˆä¸åŒ,è¿™è¾¹åšå®¢æœ‰è¯¦ç»†çš„è¯´æ˜</a>,ä»¥ä¸‹è¯´æ˜æ˜¯å¤åˆ¶ä»–æ–‡ç« ä¸­æåˆ°çš„.<br/>
fillModeï¼šå†³å®šå½“å‰å¯¹è±¡åœ¨éactiveæ—¶é—´æ®µçš„è¡Œä¸º.æ¯”å¦‚åŠ¨ç”»å¼€å§‹ä¹‹å‰,åŠ¨ç”»ç»“æŸä¹‹å<br/>
kCAFillModeRemoved è¿™ä¸ªæ˜¯é»˜è®¤å€¼,ä¹Ÿå°±æ˜¯è¯´å½“åŠ¨ç”»å¼€å§‹å‰å’ŒåŠ¨ç”»ç»“æŸå,åŠ¨ç”»å¯¹layeréƒ½æ²¡æœ‰å½±å“,åŠ¨ç”»ç»“æŸå,layerä¼šæ¢å¤åˆ°ä¹‹å‰çš„çŠ¶æ€ï¼ˆå¯ä»¥ç†è§£ä¸ºåŠ¨ç”»æ‰§è¡Œå®Œæˆåç§»é™¤ï¼‰</p>

<p>kCAFillModeForwards å½“åŠ¨ç”»ç»“æŸå,layerä¼šä¸€ç›´ä¿æŒç€åŠ¨ç”»æœ€åçš„çŠ¶æ€</p>

<p>kCAFillModeBackwards å½“åœ¨åŠ¨ç”»å¼€å§‹å‰,ä½ åªè¦æŠŠlayeråŠ å…¥åˆ°ä¸€ä¸ªåŠ¨ç”»ä¸­,layerä¾¿ç«‹å³è¿›å…¥åŠ¨ç”»çš„åˆå§‹çŠ¶æ€å¹¶ç­‰å¾…åŠ¨ç”»å¼€å§‹.ä½ å¯ä»¥è¿™æ ·è®¾å®šæµ‹è¯•ä»£ç ,å»¶è¿Ÿ3ç§’è®©åŠ¨ç”»å¼€å§‹,åªè¦åŠ¨ç”»è¢«åŠ å…¥äº†layer,layerä¾¿å¤„äºåŠ¨ç”»åˆå§‹çŠ¶æ€<br/>
ç¬¬ä¸‰ä¸ªå±æ€§ an.timingFunction = CAMediaTimingFunction(name: kCAMediaTimingFunctionEaseIn),æ˜¯åŠ¨ç”»æŒç»­è¿™æ®µæ—¶é—´çš„çŠ¶æ€,è‹¹æœæä¾›äº†å‡ ä¸ªç®€å•çš„,å…ˆå¿«åæ…¢ç­‰,å¦‚æœè§‰å¾—ä¸æ»¡æ„,å¯ä»¥è‡ªå·±å†™ä¸€ä¸ªè´å¡å°”æ›²çº¿å»,ç±»ä¼¼äºè¿™ç§<code>an.timingFunction = CAMediaTimingFunction(controlPoints: 0.17, 0.76, 0.71, 0.15)</code>å½“ç„¶è‡³äºä¸ºä»€ä¹ˆè´å¡å°”æ›²çº¿å¯ä»¥å¹²è¿™ä¹ˆå¤šäº‹,ä½ å¯ä»¥å»å¤ä¹ ä¸€ä¸‹é«˜ä¸­æ•°å­¦,é¡ºä¾¿æŠŠå¯¼æ•°,æé™,å¾®ç§¯åˆ†ä»€ä¹ˆçš„éƒ½çœ‹çœ‹,å……åˆ†ä½“ç°äº†ä¸ºä»€ä¹ˆæ•°å­¦å­¦çš„å¥½çš„äºº,ä»£ç å†™çš„å¥½äº†.</p>
</blockquote>

<pre><code>extension ViewController : CAAnimationDelegate{
    public func animationDidStop(_ anim: CAAnimation, finished flag: Bool){
        if let aa = self.layer.animation(forKey: &quot;asd&quot;),anim == aa{
            self.addFill12()//ç¬¬äºŒéƒ¨åˆ†åŠ¨ç”»
        }else{
            layer.removeAllAnimations()//æ³¨æ„åœ¨ä¸‹ä¸€æ¬¡åŠ¨ç”»å¼€å§‹çš„æ—¶å€™è¦ç§»é™¤ä¹‹å‰çš„åŠ¨ç”»
            self.btnClick(1)//ç¬¬ä¸€éƒ¨åˆ†åŠ¨ç”»
        }
    }
}
var an1 : CABasicAnimation!
    func addFill12() {
        an1 = CABasicAnimation(keyPath: &quot;strokeStart&quot;)
        an1.duration = 1
        an1.fromValue = 0
        an1.toValue = 1
        an1.delegate = self
        an1.isRemovedOnCompletion = false
        an1.fillMode = kCAFillModeForwards
        an1.timingFunction = CAMediaTimingFunction(name: kCAMediaTimingFunctionEaseIn)
        self.layer.add(an1, forKey: &quot;com.CABasicAnimation2&quot;)
    }
</code></pre>

<h4 id="toc_2">æ€»ç»“</h4>

<blockquote>
<p>è¿™ç¯‡åšå®¢åªæ˜¯è¯´äº†ä¸€äº›ç®€å•çš„åŠ¨ç”»æ˜¯å¦‚ä½•å®ç°çš„,å¦‚æœä»å®ç°çš„è§’åº¦æ¥è®²,æˆ‘è§‰å¾—æ²¡æœ‰ä»€ä¹ˆéš¾åº¦,ä¸ªäººæ„Ÿè§‰çœŸæ­£éš¾çš„åœ°æ–¹åœ¨äºå¤æ‚åŠ¨ç”»æ—¶,å¯¹äºå„ç§åŠ¨ç”»è·¯çº¿,å‡½æ•°,æ•ˆæœçš„è®¡ç®—,å¯¹äºæˆ‘è¿™ç§é«˜ä¸­æ•°å­¦å¿˜çš„å·®ä¸å¤šçš„äººæ¥è¯´,ç¡®å®æ˜¯ä¸ªæŒ‘æˆ˜.å¦‚æœæœ‰æœºä¼š,ä¸‹ä¸€ç¯‡å¾®åšæˆ‘ä¼šäº²è‡ªè¯•ä¸€è¯•å¤æ‚åŠ¨ç”»çš„å®ç°,çœ‹ä¸€çœ‹è‡ªå·±çš„æ•°å­¦åŠŸåº•.<br/>
<a href="https://github.com/RookieNeo/CALayer">Demo</a></p>
</blockquote>


</div>

<br /><br />
<hr />

<div class="row clearfix">
  <div class="large-6 columns">
	<div class="text-left" style="padding:15px 0px;">
		
	        <a href="15034498083541.html"  title="Previous Post: å¯¹Swiftå†™æ—¶å¤åˆ¶æŠ€æœ¯çš„ç†è§£">&laquo; å¯¹Swiftå†™æ—¶å¤åˆ¶æŠ€æœ¯çš„ç†è§£</a>
	    
	</div>
  </div>
  <div class="large-6 columns">
	<div class="text-right" style="padding:15px 0px;">
		
	        <a href="15017218903153.html" 
	        title="Next Post: åŸºäºAlamofireç½‘ç»œåº“çš„äºŒæ¬¡å°è£…">åŸºäºAlamofireç½‘ç»œåº“çš„äºŒæ¬¡å°è£… &raquo;</a>
	    
	</div>
  </div>
</div>

<div class="row">
<div style="padding:0px 0.93em;" class="share-comments">
<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://rookieneo.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</div>
<script type="text/javascript">
	$(function(){
		var currentURL = '15026719129123.html';
		$('#side-nav a').each(function(){
			if($(this).attr('href') == currentURL){
				$(this).parent().addClass('active');
			}
		});
	});
</script>  
</div></div>


<div class="page-bottom">
  <div class="row">
  <hr />
  <div class="small-9 columns">
  <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
  <div class="small-3 columns">
  <p class="copyright text-right"><a href="#header">TOP</a></p>
  </div>
   
  </div>
</div>

        </section>
      </div>
    </div>
    
    
    <script src="asset/js/foundation.min.js"></script>
    <script src="asset/js/foundation/foundation.offcanvas.js"></script>
    <script>
      $(document).foundation();

     
    </script>
    


  </body>
</html>
